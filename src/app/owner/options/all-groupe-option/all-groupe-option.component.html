<!--breadcrumb-->
<div class="page-breadcrumb d-none d-sm-flex align-items-center mb-3">
    <div class="breadcrumb-title pe-3">Options</div>
    <div class="ps-3">
        <nav aria-label="breadcrumb">
            <ol class="breadcrumb mb-0 p-0">
                <li class="breadcrumb-item"><a href="#" (click)="$event.preventDefault()"><i class="bx bx-group"></i></a></li>
                <li class="breadcrumb-item active" aria-current="page">List Groupe Options</li>
            </ol>
        </nav>
    </div>
    <div class="ms-auto">
        <div class="btn-group">
            <button type="button" class="btn btn-primary" (click)="goToAddGroupeOption()">Add Groupe Option</button>
        </div>
    </div>
</div>
<!--end breadcrumb-->

<div class="card">
    <div class="card-body">
      <div class="fm-search">
        <div class="mb-0">
          <div class="input-group input-group-lg">
            <span class="input-group-text bg-transparent"><i class='bx bx-search'></i></span>
            <!-- Utilisez [(ngModel)] pour la liaison bidirectionnelle -->
            <input type="text" class="form-control" placeholder="Search the files" [(ngModel)]="searchQuery"(input)="fetchOptionGroups()">
          </div>
        </div>
      </div>
        <div class="table-responsive mt-3">
            <table class="table table-striped table-hover table-sm mb-0">
                <thead>
                    <tr>
                        <th>Image</th>
                        <th>Name</th>
                        <th>Description</th>
                        <th>Action</th>
                    </tr>
                </thead>
                <tbody>
                  <tr *ngFor="let group of filteredGroupeOptions | paginate: { itemsPerPage: pageSize, currentPage: p }">
                    <td> <div class="d-flex align-items-center">
                            <img src="{{ baseUrl + '/' + group.image }}" alt=""
                                style="width: 45px; height: 45px" class="rounded-circle" />
                        </div></td>
                        <td>{{ group.name }}</td>
                        <td>{{ group.description }}</td>
                        <td>
                            <a href="javascript:void(0)" 
                                class="me-3 text-danger" title="Delete" (click)="deleteOptionGroup(group)">
                                <i class="bx bx-trash font-24"></i>
                            </a>
                            <a href="javascript:void(0)" class="me-3 text-primary" title="Edit" data-bs-toggle="modal"
                            data-bs-target="#exampleScrollableModal" (click)="openModal(group)">
                            <i class="bx bx-edit font-24"></i>
                          </a>
                            
                        </td>
                    </tr>
                   
                </tbody>
            </table>
        </div>
    </div>
</div><div class="d-flex justify-content-center mt-4">
    <pagination-controls (pageChange)="p = $event"
                          previousLabel="{{ 'previous' | translate }}"
                          nextLabel="{{ 'next' | translate }}">
    </pagination-controls>
  </div>



  <!-- ... -->
<!-- ... -->
<div class="modal fade" id="exampleScrollableModal" tabindex="-1" aria-hidden="true" [class.show]="isModalOpen">
    <div class="modal-dialog modal-dialog-scrollable">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title">Groupe details</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"
            (click)="closeAddToGroupModal()"></button>
        </div>
        <div class="modal-body">
            <div *ngIf="selectedGroup">
              <div class="text-center">
                <img src="{{ baseUrl + '/' + selectedGroup?.image }}" alt="Owner Image" class="rounded-circle"
                  style="width: 150px; height: 150px;" *ngIf="selectedGroup">
              </div>
          
              <div class="row mt-3">
                <div class="col-md-6">
                  <div class="form-group">
                    <label for="groupName">Name</label>
                    <input type="text" class="form-control" id="groupName" placeholder="Enter group name"
                      [(ngModel)]="selectedGroup.name">
                  </div>
                </div>
                <div class="col-md-6">
                  <div class="form-group">
                    <label for="groupDescription">Description</label>
                    <textarea class="form-control" id="groupDescription" rows="3"
                      placeholder="Enter group description" [(ngModel)]="selectedGroup.description"></textarea>
                  </div>
                </div>
                <div class="mb-3">
                    <label for="formFileSm" class="form-label">Images</label>
                    <input class="form-control form-control-sm" id="formFileSm" type="file" (change)="onFileChange($event)">
                </div>
              </div>
          
              <!-- Display the options within the group -->
              <div *ngIf="selectedGroup.options && selectedGroup.options.length > 0">
                <h5>Options:</h5>
                <div class="chips-container">
                  <div class="chip chip-md" *ngFor="let option of selectedGroup.options">
                    <img src="{{ baseUrl + '/' + option.image }}" alt="Option Image" class="group-image">
                    {{ option.name }}
                    <!-- Add close button (cross icon) to remove the chip -->
                    <span class="closebtn" (click)="removeOptionFromGroup(selectedGroup._id, option.option)" data-bs-dismiss="modal">&times;</span>
                    <!-- You can also include more details inside the chip if needed -->
                  </div>
                </div>
              </div>
              
              
              
            </div>
          </div>
          
          <div class="modal-footer">
            <!-- Add the Save button to update the option group -->
            <button type="button" class="btn btn-primary" data-bs-dismiss="modal" (click)="updateOptionGroup()">Save</button>
            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal" (click)="closeAddToGroupModal()">Close</button>
          </div>
      </div>
    </div>
</div>
<!-- ... -->

  <!-- ... -->
  