<div class="card radius-10">
    <div class="card-body">
        <div class="d-flex align-items-center">
            <div>
                <h5>
                <i class="lni lni-users">Clients</i>
              </h5>
            </div>
            <div class="font-22 ms-auto"><i class='bx bx-dots-horizontal-rounded'></i>
            </div>
        </div>
        <hr/>
        <div class="table-responsive">
            <table class="table align-middle mb-0">
                <thead class="table-light">
                    <tr>
                        <th>NAME</th>
                        <th>EMAIL</th>
                        <th>PHONE</th>
                        <th>LAST ORDER</th>
                        <th>TOTAL ORDERS</th>
                        <th>
                            <!-- Ajouter un événement de clic pour déclencher le tri -->
                            <div (click)="sortClientsByTotalSpent()" style="cursor: pointer;">
                                TOTAL SPENT
                                <!-- Afficher la flèche de tri en fonction de la direction -->
                                <i class="lni lni-arrow-up" [ngClass]="sortDirection === 'asc' ? 'bi-arrow-up' : 'bi-arrow-down'"></i>
                            </div>
                        </th>
                                               <th>Action</th>
                    </tr>
                </thead>
                <tbody>
                    <tr *ngFor="let client of clients">
                        <td>{{client.client_first_name}}</td>
                        <td>  {{client.client_email}} </td>
                        <td> {{client.client_phone}}</td>
                        <td>{{client.last_order_date}}</td>
                        <td> {{client.total_orders}}</td>
                        <td> {{client.total_spent}}   </td>
                        <td><button type="button" class="btn btn-primary btn-sm radius-30 px-4" (click)="viewDetails(modalContent,client)">View Details</button></td>
                    </tr> 
                </tbody>
            </table>
        </div>
    </div>
</div>
<div class="pagination-container"> 
<div class="align pagination-controls">
<div class="pagination ">
    <button class="btn btn-secondary radius-30 mt-2 mt-lg-0" (click)="prevPage()" [disabled]="currentPage === 1">Previous</button>
    <span>Page {{currentPage}}</span>
    <button class="btn btn-secondary radius-30 mt-2 mt-lg-0" (click)="nextPage()">Next</button>
  </div>
</div></div>


<ng-template #modalContent let-modal>
    <div class="modal-header">
      <h4 class="modal-title">Client Details</h4>
      <button type="button" class="btn-close" aria-label="Close" (click)="modal.dismiss('Cross click')"></button>
    </div>
    <div class="modal-body">
      <div class="custom-card">
        <div class="row mb-3">
          <div class="col-md-6">
            <div class="custom-label-container">
              <label for="name" class="form-label custom-label"><b>First_Name:</b></label>
              <div class="custom-input">{{ clientDetails.client_first_name }}</div>
            </div>
          </div>
          <div class="col-md-6">
            <div class="custom-label-container">
              <label for="description" class="form-label custom-label"><b>Last_Name:</b></label>
              <div class="custom-input">{{ clientDetails.client_last_name }}</div>
            </div>
          </div>
        </div>
        <div class="row mb-3">
            <div class="col-md-6">
                <div class="custom-label-container">
                  <label for="description" class="form-label custom-label"><b>Email:</b></label>
                  <div class="custom-input">{{ clientDetails.client_email }}</div>
                </div>
              </div>
          <div class="col-md-6">
            <div class="custom-label-container">
              <label for="Address" class="form-label custom-label"><b>Phone:</b></label>
              <div class="custom-input">{{ clientDetails.client_phone }}</div>
            </div>
          </div>
        </div>
        <div class="row mb-3">
            <div class="col-md-6">
                <div class="custom-label-container">
                  <label for="description" class="form-label custom-label"><b>LAST ORDER:</b></label>
                  <div class="custom-input">{{ clientDetails.last_order_date }}</div>
                </div>
              </div>
          <div class="col-md-6">
            <div class="custom-label-container">
              <label for="Address" class="form-label custom-label"><b>TOTAL ORDERS:</b></label>
              <div class="custom-input">{{ clientDetails.total_orders }}</div>
            </div>
          </div>
        </div>
        <div class="row mb-3">
            <div class="col-md-6">
                <div class="custom-label-container">
                  <label for="description" class="form-label custom-label"><b>TOTAL SPENT:</b></label>
                  <div class="custom-input">{{ clientDetails.total_spent }}</div>
                </div>
              </div>
       
        </div>
      </div>
    </div>
    <div class="modal-footer">
      <button type="button" class="btn btn-light" (click)="modal.close('Close click')">Close</button>
    </div>
  </ng-template>
  
  